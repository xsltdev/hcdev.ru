---
description: HTML to Markdown table transformation
globs:
alwaysApply: true
---

# HTML to Markdown Table Transformation

При преобразовании HTML таблиц в markdown таблицы следуй этим правилам:

## Исходный формат

```html
<table>
  <thead>
    <tr>
      <th>Заголовок 1</th>
      <th>Заголовок 2</th>
      <th>Заголовок 3</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>Данные 1</td>
      <td>Данные 2</td>
      <td>Данные 3</td>
    </tr>
    <tr>
      <td>Значение 1</td>
      <td>Значение 2</td>
      <td>Значение 3</td>
    </tr>
  </tbody>
</table>
```

## Целевой формат

```markdown
| Заголовок 1 | Заголовок 2 | Заголовок 3 |
|-------------|-------------|-------------|
| Данные 1    | Данные 2    | Данные 3    |
| Значение 1  | Значение 2  | Значение 3  |
```

## Правила преобразования

1.  **Удаление тегов**: Убрать все HTML теги `<table>`, `<thead>`, `<tbody>`, `<tr>`, `<th>`, `<td>`
2.  **Заголовки**: Содержимое `<th>` тегов из `<thead>` становится первой строкой таблицы
3.  **Разделитель заголовков**: После первой строки добавить строку с разделителями `|---|---|---|`
4.  **Данные**: Содержимое `<td>` тегов из `<tbody>` становится строками данных
5.  **Колонки**: Каждая ячейка отделяется символом `|` с пробелами с обеих сторон
6.  **Выравнивание**: Использовать базовое выравнивание по левому краю (только дефисы в разделителе)
7.  **Форматирование**: Сохранять читаемость с выравниванием столбцов по ширине

## Примеры применения

### Простая таблица

```html
<!-- ДО -->
<table>
  <thead>
    <tr>
      <th>Имя</th>
      <th>Возраст</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>Иван</td>
      <td>25</td>
    </tr>
    <tr>
      <td>Мария</td>
      <td>30</td>
    </tr>
  </tbody>
</table>

<!-- ПОСЛЕ -->
| Имя   | Возраст |
|-------|---------|
| Иван  | 25      |
| Мария | 30      |
```

### Таблица с выравниванием

```html
<!-- ДО -->
<table>
  <thead>
    <tr>
      <th align="left">Продукт</th>
      <th align="center">Количество</th>
      <th align="right">Цена</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>Яблоки</td>
      <td>5 кг</td>
      <td>500 руб</td>
    </tr>
    <tr>
      <td>Бананы</td>
      <td>2 кг</td>
      <td>300 руб</td>
    </tr>
  </tbody>
</table>

<!-- ПОСЛЕ -->
| Продукт | Количество | Цена    |
|:--------|:----------:|--------:|
| Яблоки  | 5 кг       | 500 руб |
| Бананы  | 2 кг       | 300 руб |
```

### Таблица без thead/tbody

```html
<!-- ДО -->
<table>
  <tr>
    <th>Параметр</th>
    <th>Значение</th>
  </tr>
  <tr>
    <td>Размер</td>
    <td>Large</td>
  </tr>
  <tr>
    <td>Цвет</td>
    <td>Синий</td>
  </tr>
</table>

<!-- ПОСЛЕ -->
| Параметр | Значение |
|----------|----------|
| Размер   | Large    |
| Цвет     | Синий    |
```

## Варианты выравнивания

-   **По левому краю**: `:---` или просто `---`
-   **По центру**: `:---:`
-   **По правому краю**: `---:`

## Важные примечания

-   Сохранять содержимое ячеек без изменений, включая HTML разметку внутри ячеек
-   Первая строка с `<th>` тегами всегда становится заголовком таблицы
-   Если `<th>` теги есть в `<tbody>`, их содержимое обрабатывается как обычные данные
-   Учитывать атрибуты `align` для определения выравнивания колонок
-   Пустые ячейки оставлять пустыми между разделителями `| |`
-   Удалять лишние пробелы в начале и конце содержимого ячеек
-   Экранировать символы `|` внутри ячеек как `\|`
-   Сохранять переносы строк внутри ячеек с помощью `<br>` тегов
